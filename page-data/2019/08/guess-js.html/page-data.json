{"componentChunkName":"component---src-templates-post-template-tsx","path":"/2019/08/guess-js.html","result":{"data":{"markdownRemark":{"id":"0bbdd78f-4026-5907-9ff7-4a328b7f4049","html":"<p>Guess.js là một tập các thư viện và công cụ giúp sử dụng dữ liệu và thuật toán để cải thiện UX của trang. Thư viện gồm các thuật toán sử dụng nội dung trang và dữ liệu Google Analytics, sử dụng <a href=\"https://en.wikipedia.org/wiki/Predictive_analytics\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">predictive analytics</a> để cải thiện hiệu năng tải trang thông qua <code class=\"language-text\">&lt;link rel=&quot;[prerender/prefetch/preload]&quot;&gt;</code>, quyết định xem nên tải tài nguyên nào trước. Dự đoán người dùng bấm vào link nào tiếp theo từ trang hiện tại.</p>\n<p>Preloading tài nguyên là một cách hay để cải thiệu hiệu năng trang. Tuy nhiên preloading mọi thứ sẽ khiến lãng phí băng thông, đặt biệt là với mobile, guess.js sẽ giúp bạn điều này.</p>\n<p><figure class=\"md-figure\"><img src=\"https://4.bp.blogspot.com/-Gjsnx_YH4HM/XU2UV2DlnnI/AAAAAAABFVM/LjDl6ilxQeYPzQgs_acID9VEwy4L62QsACK4BGAYYCw/s400/guess.png\"><figcaption>Guess.js</figcaption></figure></p>\n<p>Bạn có thể xem thông báo ra mắt chính thức của Guess.js bởi Addy Osmani và Ewa Gasperowicz tại Google I/O 2018:</p>\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <iframe src=\"https://www.youtube.com/embed/Mv-l3-tJgGk?start=2275\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen=\"\" style=\" position: absolute; top: 0; left: 0; width: 100%; height: 100%; \"></iframe> </div>\n<h1 id=\"cài-đặt-guessjs-vào-gatsby\" style=\"position:relative;\"><a href=\"#c%C3%A0i-%C4%91%E1%BA%B7t-guessjs-v%C3%A0o-gatsby\" aria-label=\"cài đặt guessjs vào gatsby permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cài đặt Guess.js vào Gatsby</h1>\n<p>Với plugin <a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-guess-js/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">gatsby-plugin-guess-js</a> Guess.js sẽ tự động dữ liệu từ Google Analytics lúc build để tạo model predict, trang nào có xác suất được người dùng bấm vào nhiều nhất từ trang hiện tại.</p>\n<p>Plugin sẽ làm 2 việc:</p>\n<ul>\n<li>Khi generate HTML pages, tự động thêm <code class=\"language-text\">&lt;link prefetch&gt;</code> cho các tài nguyên của các trang có  xác suất cao sẽ được user xem tiếp. Có nghĩa là ngay khi người dùng vừa truy cập, trình duyệt sẽ tự động tải các trang tiếp theo dưới background.</li>\n<li>Khi một người dùng đã xem một vài trang, plugin sẽ tiếp tục dự đoán các trang tiếp theo nữa và prefetch tài nguyên.</li>\n</ul>\n<h2 id=\"cài-đặt\" style=\"position:relative;\"><a href=\"#c%C3%A0i-%C4%91%E1%BA%B7t\" aria-label=\"cài đặt permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cài đặt</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install --save gatsby-plugin-guess-js</code></pre></div>\n<p>Mở file <code class=\"language-text\">gatsby-config.js</code></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// In your gatsby-config.js</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby-plugin-guess-js\"</span><span class=\"token punctuation\">,</span>\n      options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Find the view id in the GA admin in a section labeled \"views\"</span>\n        GAViewID<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">VIEW_ID</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n        minimumThreshold<span class=\"token operator\">:</span> <span class=\"token number\">0.03</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// The \"period\" for fetching analytic data.</span>\n        period<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          startDate<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"2018-1-1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          endDate<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Tích hợp với CI</p>\n<p>Việc tích hợp với CI sẽ có thể có lỗi vì plugin sẽ hiện thông báo đăng nhập vào tài khoản Google Analytics để lấy dữ liệu, bạn có thể cài đặt <code class=\"language-text\">jwt</code> để tự động truy cập dữ liệu</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// In your gatsby-config.js</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby-plugin-guess-js\"</span><span class=\"token punctuation\">,</span>\n      options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Find the view id in the GA admin in a section labeled \"views\"</span>\n        GAViewID<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">VIEW_ID</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n        minimumThreshold<span class=\"token operator\">:</span> <span class=\"token number\">0.03</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// Set Google Analytics jwt with Google Service Account email and private key</span>\n        jwt<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          client_email<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">GOOGLE_SERVICE_ACCOUNT_EMAIL</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n          private_key<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">GOOGLE_SERVICE_ACCOUNT_PRIVATE_KEY</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// The \"period\" for fetching analytic data.</span>\n        period<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          startDate<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"2018-1-1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          endDate<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1 id=\"references\" style=\"position:relative;\"><a href=\"#references\" aria-label=\"references permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>References</h1>\n<ul>\n<li>Machine Learning-Driven Bundling. The Future of JavaScript Tooling. <a href=\"https://blog.mgechev.com/2018/03/18/machine-learning-data-driven-bundling-webpack-javascript-markov-chain-angular-react/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://blog.mgechev.com/2018/03/18/machine-learning-data-driven-bundling-webpack-javascript-markov-chain-angular-react/</a></li>\n<li>Teach Your Bundler Users’ Habits <a href=\"https://www.youtube.com/watch?v=L5tPWCB7jX0\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://www.youtube.com/watch?v=L5tPWCB7jX0</a></li>\n<li>Predictive analytics <a href=\"https://en.wikipedia.org/wiki/Predictive_analytics\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://en.wikipedia.org/wiki/Predictive_analytics</a></li>\n<li>Guess.js organization on GitHub <a href=\"https://github.com/guess-js\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/guess-js</a></li>\n<li>Guess.js Route Parser <a href=\"https://github.com/guess-js/guess/tree/master/packages/parser#react\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/guess-js/guess/tree/master/packages/parser#react</a></li>\n<li>Guess.js on GitHub <a href=\"https://github.com/guess-js/guess\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/guess-js/guess</a></li>\n<li>Gatsby.js <a href=\"https://www.gatsbyjs.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://www.gatsbyjs.org/</a></li>\n<li>Guess.js plugin for Gatsby <a href=\"https://github.com/guess-js/gatsby-guess\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/guess-js/gatsby-guess</a></li>\n<li>Demo of Gatsby.js using Guess.js <a href=\"https://guess-gatsby-wikipedia.firebaseapp.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://guess-gatsby-wikipedia.firebaseapp.com/</a></li>\n</ul>","fields":{"slug":"/2019/08/guess-js.html","tagSlugs":["/tag/data/","/tag/web/","/tag/data-engineer/","/tag/javascript/"]},"frontmatter":{"date":"2019-08-09T22:10:00.000+07:00","description":"Guess.js - Thư viện và công cụ cải thiện UX dựa trên Dữ liệu, thống kê và Machine Learning. Và cách cài đặt plugin Gatsby.","tags":["Data","Web","Data Engineer","Javascript"],"title":"Guess.js","fbCommentUrl":"none"}}},"pageContext":{"slug":"/2019/08/guess-js.html"}},"staticQueryHashes":["251939775","2672868365","401334301"]}