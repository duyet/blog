{"componentChunkName":"component---src-templates-post-template-tsx","path":"/2019/10/ir-evaluation-2.html","result":{"data":{"markdownRemark":{"id":"d691e354-90bf-5b02-a1a3-20ca6886cfd7","html":"<p>Tiếp theo về các chỉ số đánh giá các hệ thống Information Retrieval, bài này sẽ bàn về đánh giá hệ thống tìm kiếm với Ground truth là non-binary (không phải nhị phân) và đánh giá hệ thống large scale.</p>\n<p>Với các bộ Ground truth không phải là nhị phân, ta không thể sử dụng các độ đo như Precision, Recall, …, ta dùng một số độ đo khác. Tương tự, với hệ thống ở mức độ cực lớn, ta không thể nào tính được recall, do chỉ biết được kết quả trả về ở những trang đầu.</p>\n<hr>\n<h3 id=\"information-retrieval\" style=\"position:relative;\"><a href=\"#information-retrieval\" aria-label=\"information retrieval permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Information Retrieval</h3>\n<ul>\n<li>Phần 1: <a href=\"/2019/08/ir-vector-space-model.html\">Vector Space Model</a></li>\n<li>Phần 2: <a href=\"/2019/08/ir-evaluation.html\">Đánh giá hệ thống Information Retrieval</a></li>\n<li><strong>Phần 3: Đánh giá hệ thống Information Retrieval (tiếp theo)</strong></li>\n</ul>\n<hr>\n<h1 id=\"chỉ-số-đánh-giá-khi-ground-truth-là-non-binary\" style=\"position:relative;\"><a href=\"#ch%E1%BB%89-s%E1%BB%91-%C4%91%C3%A1nh-gi%C3%A1-khi-ground-truth-l%C3%A0-non-binary\" aria-label=\"chỉ số đánh giá khi ground truth là non binary permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Chỉ số đánh giá khi Ground truth là non-binary</h1>\n<h2 id=\"a-precision--recall\" style=\"position:relative;\"><a href=\"#a-precision--recall\" aria-label=\"a precision  recall permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>a. Precision &#x26; Recall</h2>\n<p>Precision &#x26; Recall là 2 độ đo phổ biến, nhất là trong các hệ thống phân lớp (binary classification), information retrieval, …</p>\n<ul>\n<li><strong>Precision</strong>: độ chính xác, ví dụ hệ thống tìm kiếm trả về 30 kết quả, trong đó</li>\n</ul>\n<div class=\"math math-display\">{\\displaystyle {\\text{precision}}={\\frac {\\{{\\text{Tổng số kết quả trả về đúng}}\\}}{|\\{{\\text{Tổng số kết quả trả về}}\\}|}}}</div>\n<ul>\n<li><strong>Recall</strong>: độ phủ</li>\n</ul>\n<div class=\"math math-display\">{\\displaystyle {\\text{precision}}={\\frac {\\{{\\text{Tổng số kết quả trả về đúng}}\\}}{|\\{{\\text{Tổng số kết quả đúng}}\\}|}}}</div>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1152px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/13535b3a856a963fa88a00a1b7765cf5/8dd4b/precision-recall.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAABYlAAAWJQFJUiTwAAACX0lEQVQoz01SO4/TQBD2v4AKKBAV4jfQncRPoOAvQIEEJTSI5hBIETokxAkUJIpDV3AnBFfQINLA3YnEDn6tX7Hj+JHEj/i53mHswF3G49Xut/P4ZmY5YOxcgaUpi2OWZSzp1jxj83m7RzxbtQab9hy0QKf4AwRzpuhg2CBr7aoaQCyQCCC4iFqDtdlaOIji9l63UZkyAXsKlg2aCZYJutWqZYChgU5A14BojBBGNFBUWC45RvMqk1HzRGyolnm/q0wEakE2gUYHakSBl0ZxU1ZZnORJQouyzvMCy6CUK0vv5PQRzz923O2Tjw/e3rq5d3vLPNw5/dCTvz8H6BsmrxsTSZZsx/GDQJQk3TAibAzW3DThcvEqy1+n3svtK9eeXrj87sbW8cMn5lHfOuhDuueHJAgWQeAvFos0TX3fXy6XeZ43TYMNCxnbBXhTZTsvrl+6x3HPLl41ez0YHtGTfajeuzPJNG1VVWzbns1mqqrquo7+rOt21NBPtN4H+Oz/2T24e+dH737tfq3Jtzo6BPjie4brerIsrXPKsmxZVoZjXI/qn+CpOZtDA0A7qEVWq5XneeiQJEkQBGEYVlXVjQp5h4HjOIge//w1Go5kSZJESeCFMX4CPxqNRFHEhOPxGDljqRtzBojjGINRSqfTKToSoqIdhrMsU1EUrJAQInWCFFpW//03aAMURYHXVSe4L8sSu7pez5C6rs8z4xkbgOEx+WQyGQwGmA1JCoIwHA55nh92omka0sEScGDr/rTOyKHoBGMjc9M0MRb6YyDXdfGIdWIJOCfDwLa7bONx/wU8LfRHd45MLAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/13535b3a856a963fa88a00a1b7765cf5/e93cc/precision-recall.webp 300w,\n/static/13535b3a856a963fa88a00a1b7765cf5/b0544/precision-recall.webp 600w,\n/static/13535b3a856a963fa88a00a1b7765cf5/c2ad5/precision-recall.webp 1152w\"\n              sizes=\"(max-width: 1152px) 100vw, 1152px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/13535b3a856a963fa88a00a1b7765cf5/eed55/precision-recall.png 300w,\n/static/13535b3a856a963fa88a00a1b7765cf5/7491f/precision-recall.png 600w,\n/static/13535b3a856a963fa88a00a1b7765cf5/8dd4b/precision-recall.png 1152w\"\n            sizes=\"(max-width: 1152px) 100vw, 1152px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/13535b3a856a963fa88a00a1b7765cf5/8dd4b/precision-recall.png\"\n            alt=\"Trade off\"\n            title=\"Trade off\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Trade off</figcaption>\n  </figure></p>\n<p>Ví dụ, hệ thống tìm kiếm cho kết quả 30 trang, trong đó có 20 trang đúng. Nhưng thực sự trong toàn bộ hệ thống sẽ có tất cả 40 trang đúng. Vậy precision sẽ là 20/30 = 2/3, recall là 20/40 = 1/2.</p>\n<p>Tham khảo thêm:</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Precision_and_recall\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://en.wikipedia.org/wiki/Precision_and_recall</a></li>\n<li><a href=\"https://towardsdatascience.com/precision-vs-recall-386cf9f89488\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://towardsdatascience.com/precision-vs-recall-386cf9f89488</a></li>\n</ul>\n<p>Một hệ thống tốt sẽ có sự đánh đổi giữa Precision và Recall. Thực tế cho rằng: <em>Precision giảm khi recall tăng</em></p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 904px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a171506eca770d6c72719ecaca4a301a/03de4/trade-off.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAABYlAAAWJQFJUiTwAAABl0lEQVQoz3VRaY+bMBDN//9N/VQp2w1LN0dhEwiJCk64S4y5jM14aoI2YqXs08gae/zmeLNAxAFQKlSIoJBLBBx9bfpR+/LTlzBep+iEBQp+C+j+je7N8q9V2gZ119TbsNOWuevSeWfeptSh/Vt5/lMeN+XhN7s6DGG4k8sS0wTTHKMMkwyzTPsQJsMlgjCSJIQwxijFJNVX/TgZ9v1IHgA2tr33joeT93F0LcexXfdEAiHl1Jv+wLqu4lypR7+fbQNAeL0mcXwhJPB94vuXIKgoVVKCEKLr6O0WR1GaJDAMqPkPG9ueoa1rh5Bd2x4AbCktIV7zPNNzzUT6UnkMKKXra0cX/GVZr1KaiKZS+lzqypzjuAj1nDzx9VkWxeZ8NgHMYXhHXCMaQtT34TV5ji/kCZJzL01f+n7ZNMu2+VlVP7IspnQQ4tu2H9ApWV23AK7v255Hu65omn9F0fc9ISQMw1jretHKEn6fZfEsI4q+51035ZuE3e12hmGsVivHcbbbbVEUT8hqtk01E5kxVlVVnufzbf8HQbiuBii4XgAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/a171506eca770d6c72719ecaca4a301a/e93cc/trade-off.webp 300w,\n/static/a171506eca770d6c72719ecaca4a301a/b0544/trade-off.webp 600w,\n/static/a171506eca770d6c72719ecaca4a301a/4c141/trade-off.webp 904w\"\n              sizes=\"(max-width: 904px) 100vw, 904px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/a171506eca770d6c72719ecaca4a301a/eed55/trade-off.png 300w,\n/static/a171506eca770d6c72719ecaca4a301a/7491f/trade-off.png 600w,\n/static/a171506eca770d6c72719ecaca4a301a/03de4/trade-off.png 904w\"\n            sizes=\"(max-width: 904px) 100vw, 904px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/a171506eca770d6c72719ecaca4a301a/03de4/trade-off.png\"\n            alt=\"Trade off\"\n            title=\"Trade off\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Trade off</figcaption>\n  </figure></p>\n<ul>\n<li>Bạn có thể tăng recall bằng cách tăng số docs trả về.</li>\n<li>Recall là một hàm không tăng</li>\n<li>Một hệ thống tìm kiếm trả về toàn bộ docs đạt 100% recall</li>\n</ul>\n<h2 id=\"b-auc\" style=\"position:relative;\"><a href=\"#b-auc\" aria-label=\"b auc permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>b. AUC</h2>\n<p>Để đánh giá hệ thống tốt khi đánh đổi giữa Precision và Recall, ta dùng một chỉ số là <strong>AUC (Area under Curve)</strong>: diện tích dưới đường vẽ của Recall-Precision.</p>\n<p>Các vẽ đường precision-recall curve:</p>\n<ul>\n<li>Cho một query, chọn ra top <strong>n</strong> kết quả đúng -> với mỗi <strong>n</strong> ta có một cặp recall/precision</li>\n<li>Thay đổi <strong>n</strong> ta có một dãy <strong>n</strong> cặp điểm như thế.</li>\n<li>Vẽ các cặp điểm này ta được đồ thị như sau:</li>\n</ul>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 592px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e1f76d8963a1d6b57d63859cf6d81069/e95df/precision-recall-curve.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAABYlAAAWJQFJUiTwAAABaUlEQVQoz5VS226DMAzl/79r2sue9lK1olxSICm30IokhJDLTNNu0HZTd4Qix7F9jm0C59woZZZnp7K2anL/QTAfdj6aopS9+L6+msw5R9mBpNnEfLK1xr5SYk7WWg+DqMoW77Bkw5Xc2vn7OxloiwK3TV3g+v0NFdvcTbJNSyVGd63wa5WgqqrNZjMMPIlJgfsk6aJ9Sw4UfaaTkMtQ+1AiaJomDEOlFKWdMRahE2NqHkQvw4/oGBKKqZbjc2ZKKUKormsw3G3WnkRr25+HFlOyP+JtcS5PZtJLCfPAjDFSSsaYW45p3eo0Th3pjrt8OLP7VaVp2rbt08aWDnitdtnI5eInuaDve3sDaHk0YKMQpqQaxfiTDIKjKIKehRCgAq78ArbG1cmZNnrFDNOO4xjewIblEULAgFpJkgAn2Hme+7464OBilQzCYGY+Tl3gndAL7AJqgS7/CuK9ser5KSAuyzLg96Lu8AVUuGpcfESv0AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/e1f76d8963a1d6b57d63859cf6d81069/e93cc/precision-recall-curve.webp 300w,\n/static/e1f76d8963a1d6b57d63859cf6d81069/c052d/precision-recall-curve.webp 592w\"\n              sizes=\"(max-width: 592px) 100vw, 592px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/e1f76d8963a1d6b57d63859cf6d81069/eed55/precision-recall-curve.png 300w,\n/static/e1f76d8963a1d6b57d63859cf6d81069/e95df/precision-recall-curve.png 592w\"\n            sizes=\"(max-width: 592px) 100vw, 592px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/e1f76d8963a1d6b57d63859cf6d81069/e95df/precision-recall-curve.png\"\n            alt=\"precision-recall curve\"\n            title=\"precision-recall curve\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">precision-recall curve</figcaption>\n  </figure></p>\n<p>Một số điểm đồ thị sẽ bị răng cưa như trên, ta sẽ dùng kỹ thuật interpolated curve, nối các điểm như đường màu đỏ dưới đây <span class=\"math math-inline\">P(r) = \\text{max}_{r' > r} P(r')</span></p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 956px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/40535c920092ee8f083a4148bfa69156/ab07e/precision-recall-curve-interpolated.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAABYlAAAWJQFJUiTwAAABbklEQVQoz42Si5KDIAxF+///2VmLIvIIJLzcq7SznZ12twxiFE5yc/Wy7zsRee8lZxZJ/GKklJ6DsQK84AK2aZ0pYgpRKaVijLWOsDwHWEMID1hkvunGstcSTSic9z9H7z3GeIch43ZbRTriADgdknrrH8FoQCnj/VGQScR6bJZAQvJRZaXWAYvUXI6aRWo0dJ59D+M2z8paH8IJc825HhljTjb8A8O36/VKh8kNYtMBN8nNbRwX00Vazm9hROC9d6115wQpau1ItVmJnlsutLjsArp4axhgFGRuYxv1to3RCCQgjo5IO3yA0cJvwwDDKnmkZ67OZViIRlrvFHJYQzSeXXxRGcJRAXPApXTwmGgBI6XC0kIofrFxdTjwA+MPw7/dO1K++KrwIqXT/zOFuBC1jUR3GCQMh3jkU0rhEVq01sYYvNR6nedFhL1z0zSxsNVmun611i6jB+h7CC79FIA9KEIurIjHMeyOY6OfbyAUboUDMHFdAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/40535c920092ee8f083a4148bfa69156/e93cc/precision-recall-curve-interpolated.webp 300w,\n/static/40535c920092ee8f083a4148bfa69156/b0544/precision-recall-curve-interpolated.webp 600w,\n/static/40535c920092ee8f083a4148bfa69156/dbaa2/precision-recall-curve-interpolated.webp 956w\"\n              sizes=\"(max-width: 956px) 100vw, 956px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/40535c920092ee8f083a4148bfa69156/eed55/precision-recall-curve-interpolated.png 300w,\n/static/40535c920092ee8f083a4148bfa69156/7491f/precision-recall-curve-interpolated.png 600w,\n/static/40535c920092ee8f083a4148bfa69156/ab07e/precision-recall-curve-interpolated.png 956w\"\n            sizes=\"(max-width: 956px) 100vw, 956px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/40535c920092ee8f083a4148bfa69156/ab07e/precision-recall-curve-interpolated.png\"\n            alt=\"precision-recall curve\"\n            title=\"precision-recall curve\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">precision-recall curve</figcaption>\n  </figure></p>\n<p><strong>11-point interpolated average precision</strong>: tính precision trung bình ở 11 điểm</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1118px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ab971d17ba7ca8bea5126ec41b8fd350/60c58/11-point-precision-recall.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA9UlEQVQoz52TzY6DMAyEef/3aznACakrIQE5JE2c3/YroRWqttqlFgJjeybOOGluq+Wcb8etqR/nXErpGzDLei9fgkXc5fITQjwMLqWwsog3Rg6Dl2U5nc7zPIsEkWOdN+M4tm2Ll1JENedizuW/YK31MAysXwWLMVsLSwgh/cnyEIxte+/3agMjAAsPzieWpg6Z5n8dFWfn2cvGgr0fkrhaKVtu5+TqrGchoai1wRgapfgJRm1jDBXWWvaPQztKqZolwi9ESi0UxJi0voLfwOgj8pgznBVDI9NqIHlTQHCamKiv2ZzTBt7v5GUE+77vuu7TtbkDPT460MC/CpEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/ab971d17ba7ca8bea5126ec41b8fd350/e93cc/11-point-precision-recall.webp 300w,\n/static/ab971d17ba7ca8bea5126ec41b8fd350/b0544/11-point-precision-recall.webp 600w,\n/static/ab971d17ba7ca8bea5126ec41b8fd350/974c5/11-point-precision-recall.webp 1118w\"\n              sizes=\"(max-width: 1118px) 100vw, 1118px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/ab971d17ba7ca8bea5126ec41b8fd350/eed55/11-point-precision-recall.png 300w,\n/static/ab971d17ba7ca8bea5126ec41b8fd350/7491f/11-point-precision-recall.png 600w,\n/static/ab971d17ba7ca8bea5126ec41b8fd350/60c58/11-point-precision-recall.png 1118w\"\n            sizes=\"(max-width: 1118px) 100vw, 1118px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/ab971d17ba7ca8bea5126ec41b8fd350/60c58/11-point-precision-recall.png\"\n            alt=\"precision-recall curve\"\n            title=\"precision-recall curve\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">precision-recall curve</figcaption>\n  </figure></p>\n<p>Ta tính diện tích dưới đường precision-recall curve, diện tích lớn hơn thì cho kết quả tốt hơn.</p>\n<h2 id=\"c-r-precision\" style=\"position:relative;\"><a href=\"#c-r-precision\" aria-label=\"c r precision permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>c. R-precision</h2>\n<p>Tính precision tại vị trí thứ <strong>R-th</strong> mà câu query trả về <strong>R</strong> câu trả lời.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/aef0032d34856b9ac345f9c0cbe4bc24/93843/R-precision.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAABYlAAAWJQFJUiTwAAABvUlEQVQoz5VSXXOqMBD1//+vPrWjBZEQEiKKUrmOCgYIhCTbBWvvdcYH75mdw06yJ/vBzgDhnLMW+cfAtY2tSlterLy6m1njfgN+g2fwiFELUFWQHyAvgDJIt5Ck0PXT7WPwDLQGITpCDOeGMZckyJpRzalhEawTJ7hLYicSHccYYznXlGIYpOmY2VUVJyTwvND3SRAkcRwul5QQGhJ0vPnCXywEY+hzSqPVav7+vvj46Nt2dmv563BgnPuoiWOeJOlmQ6IoJARtNSEMQ8YYfpb4uhDGjvjpGS8ijA7DIAiKohiGQdZ1o1Q/DJ3WSuvOGPRV1ymF1N17nnA6nSilnufN5/M8z8dylAIMahqQEup6ZDzBAT0MbAKm2u12vu+jskEBgL1KVzc4Dnc+u3M5Mp7ccz6Itdb7/Z4Qgg42A6/hLu667WazWi5V2w5jba4sh/NpQJbSyOvIl8uglH0iNodD8fnJ3950lpksA3n9czT7vd5u++MRnzBoRaHrxjwR91h2nse4Btaa18t200Li9NM0xYFPm2tve/p32f/Z3Cfitm2FEBxXT2tjzP9lxl+fZdl6vZZS9n3/ihIL/AbXfVeJhjLO1AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/aef0032d34856b9ac345f9c0cbe4bc24/e93cc/R-precision.webp 300w,\n/static/aef0032d34856b9ac345f9c0cbe4bc24/b0544/R-precision.webp 600w,\n/static/aef0032d34856b9ac345f9c0cbe4bc24/68fc1/R-precision.webp 1200w,\n/static/aef0032d34856b9ac345f9c0cbe4bc24/8de58/R-precision.webp 1728w\"\n              sizes=\"(max-width: 1200px) 100vw, 1200px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/aef0032d34856b9ac345f9c0cbe4bc24/eed55/R-precision.png 300w,\n/static/aef0032d34856b9ac345f9c0cbe4bc24/7491f/R-precision.png 600w,\n/static/aef0032d34856b9ac345f9c0cbe4bc24/8537d/R-precision.png 1200w,\n/static/aef0032d34856b9ac345f9c0cbe4bc24/93843/R-precision.png 1728w\"\n            sizes=\"(max-width: 1200px) 100vw, 1200px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/aef0032d34856b9ac345f9c0cbe4bc24/8537d/R-precision.png\"\n            alt=\"R-precision\"\n            title=\"R-precision\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">R-precision</figcaption>\n  </figure></p>\n<h2 id=\"d-f-measure\" style=\"position:relative;\"><a href=\"#d-f-measure\" aria-label=\"d f measure permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>d. F-Measure</h2>\n<p>F-Measure (<span class=\"math math-inline\">F_1</span> Score) là độ đo bao gồm vừa Precison và Recall, công thức truyền thống F-Measure là <a href=\"https://en.wikipedia.org/wiki/Harmonic_mean#Harmonic_mean_of_two_numbers\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">harmonic mean</a> của precision và recall.</p>\n<div class=\"math math-display\">{\\displaystyle F_{1}=\\left({\\frac {2}{\\mathrm {recall} ^{-1}+\\mathrm {precision} ^{-1}}}\\right)=2\\cdot {\\frac {\\mathrm {precision} \\cdot \\mathrm {recall} }{\\mathrm {precision} +\\mathrm {recall} }}}.</div>\n<p>Theo ý nghĩa toán học, để đạt được F-measure cao, ta cần Precision lẫn Recall đều cao.</p>\n<h2 id=\"e-e-measure-parameterized-f-measure\" style=\"position:relative;\"><a href=\"#e-e-measure-parameterized-f-measure\" aria-label=\"e e measure parameterized f measure permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>e. E-Measure (parameterized F Measure)</h2>\n<p>Vẫn là F-measure nhưng có thêm tham số hiệu chỉnh, vì đôi khi ta cần Precision quan trọng hơn hoặc ngược lại.</p>\n<div class=\"math math-display\">F_\\beta = \\frac{(1 + \\beta^2) \\cdot (\\mathrm{precision} \\cdot \\mathrm{recall})}{(\\beta^2 \\cdot \\mathrm{precision} + \\mathrm{recall})}\\,</div>\n<p>Khi đó <span class=\"math math-inline\">\\beta</span> sẽ điều chỉnh trọng số giữa precision và recall:</p>\n<ul>\n<li><span class=\"math math-inline\">\\beta</span> = 1: Trọng số precision và recall bằng nhau (E=F).</li>\n<li><span class=\"math math-inline\">\\beta</span> > 1: Trọng số recall cao hơn.</li>\n<li><span class=\"math math-inline\">\\beta</span> &#x3C; 1: Trọng số precision cao hơn.</li>\n</ul>\n<h2 id=\"f-map-mean-average-precision\" style=\"position:relative;\"><a href=\"#f-map-mean-average-precision\" aria-label=\"f map mean average precision permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>f. MAP (Mean Average Precision)</h2>\n<p>Đây là độ đo tổng hợp kết quả của nhiều query, được sử dụng rất phổ biến. <strong>MAP</strong> cũng chứa thông tin của <strong>precision và recall</strong>, có xét đến độ quan trọng của <em>thứ hạng kết quả</em>.</p>\n<ul>\n<li><strong>Average Precision</strong>: trung bình của các precision tại các điểm mà mỗi kết quả đúng trả về.</li>\n<li><strong>Mean Average Precision</strong>: trung bình của các Average Precision cho một tập các queries.</li>\n</ul>\n<h1 id=\"tham-khảo\" style=\"position:relative;\"><a href=\"#tham-kh%E1%BA%A3o\" aria-label=\"tham khảo permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tham khảo</h1>\n<ul>\n<li><a href=\"https://nlp.stanford.edu/IR-book/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Introduction to Information Retrieval - Stanford NLP Group</a></li>\n<li><a href=\"https://www.cl.cam.ac.uk/teaching/1415/InfoRtrv/lecture5.pdf\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://www.cl.cam.ac.uk/teaching/1415/InfoRtrv/lecture5.pdf</a></li>\n</ul>\n<p><em>Many slides in this post are adapted from Prof. Joydeep Ghosh (UT ECE) who in turn adapted them from Prof. Dik Lee (Univ. of Science and Tech, Hong Kong)</em></p>","fields":{"slug":"/2019/10/ir-evaluation-2.html","tagSlugs":["/tag/data/","/tag/data-engineer/","/tag/information-retrieval/","/tag/nlp/"]},"frontmatter":{"date":"2019-10-09T20:00:00.000+07:00","description":"Tiếp theo về các chỉ số đánh giá các hệ thống Information Retrieval, bài này sẽ bàn về đánh giá hệ thống tìm kiếm với Ground truth là non-binary (không phải nhị phân), và đánh giá hệ thống large scale.","tags":["Data","Data Engineer","Information Retrieval","NLP"],"title":"Đánh giá hệ thống Information Retrieval (tiếp theo)","fbCommentUrl":null}}},"pageContext":{"slug":"/2019/10/ir-evaluation-2.html"}},"staticQueryHashes":["251939775","2672868365","401334301"]}