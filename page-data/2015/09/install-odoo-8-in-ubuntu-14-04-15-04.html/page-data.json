{"componentChunkName":"component---src-templates-post-template-js","path":"/2015/09/install-odoo-8-in-ubuntu-14-04-15-04.html","result":{"data":{"markdownRemark":{"id":"f60daf45-5bd0-5157-8c93-de41cc430264","html":"<p>You can simply <a href=\"https://www.odoo.com/page/download\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">download</a> a .deb (for Debian/Ubuntu type systems) or a. rpm (Redhat/CentOS) package of OpenERP and install that. Unfortunately that approach doesn’t provide us (Libertus Solutions) with enough fine-grained control over where things get installed, and it restricts our flexibility to modify &#x26; customise, hence I prefer to do it a slightly more manual way (this install process below should only take about 10-15 minutes once the host machine has been built). </p>\n<h1 id=\"step-1-create-the-odoo-user-that-will-own-and-run-the-application\" style=\"position:relative;\"><a href=\"#step-1-create-the-odoo-user-that-will-own-and-run-the-application\" aria-label=\"step 1 create the odoo user that will own and run the application permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 1. Create the Odoo user that will own and run the application</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo adduser --system --home=/opt/odoo --group odoo</code></pre></div>\n<ul>\n<li>This is a <strong>“system”</strong> user. It is there to own and run the application, it isn’t supposed to be a person type user with a login etc.</li>\n<li>I”ve specified a <strong>“home”</strong> of <code class=\"language-text\">/opt/odoo</code>, this is where the OpenERP server code will reside and is created automatically by the command above.</li>\n</ul>\n<p>Note: How to run the Odoo server as the odoo system user from the command line if it has no shell. <code class=\"language-text\">bash sudo su - odoo -s /bin/bash</code></p>\n<h1 id=\"step-2-install-and-configure-the-database-server-postgresql\" style=\"position:relative;\"><a href=\"#step-2-install-and-configure-the-database-server-postgresql\" aria-label=\"step 2 install and configure the database server postgresql permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 2. Install and configure the database server, PostgreSQL</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo apt-get install postgresql</code></pre></div>\n<p>Then configure the Odoo user on <strong>postgres</strong>:</p>\n<p>First change to the postgres user so we have the necessary privileges to configure the database.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo su - postgres</code></pre></div>\n<p>Now create a new database user. This is so Odoo has access rights to connect to PostgreSQL and to create and drop databases. Remember what your choice of password is here; you will need it later on:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">createuser --createdb --username postgres --no-createrole --no-superuser --pwprompt odoo\nEnter password for new role: ********\nEnter it again: ********</code></pre></div>\n<p>Finally exit from the postgres user account:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">exit</code></pre></div>\n<h1 id=\"step-3-install-the-necessary-python-libraries-for-the-server\" style=\"position:relative;\"><a href=\"#step-3-install-the-necessary-python-libraries-for-the-server\" aria-label=\"step 3 install the necessary python libraries for the server permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 3. Install the necessary Python libraries for the server</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo apt-get install python-cups python-dateutil python-decorator python-docutils python-feedparser \\\npython-gdata python-geoip python-gevent python-imaging python-jinja2 python-ldap python-libxslt1 \\\npython-lxml python-mako python-mock python-openid python-passlib python-psutil python-psycopg2 \\\npython-pybabel python-pychart python-pydot python-pyparsing python-pypdf python-reportlab python-requests \\\npython-simplejson python-tz python-unicodecsv python-unittest2 python-vatnumber python-vobject \\\npython-werkzeug python-xlwt python-yaml wkhtmltopdf</code></pre></div>\n<h1 id=\"step-4-install-the-odoo-server\" style=\"position:relative;\"><a href=\"#step-4-install-the-odoo-server\" aria-label=\"step 4 install the odoo server permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 4. Install the Odoo server</h1>\n<p>Install Git.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo apt-get install git</code></pre></div>\n<p>Switch to the Odoo user:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo su - odoo -s /bin/bash</code></pre></div>\n<p>Grab a copy of the most current Odoo 8 branch (Note the ”.” at the end of this command!):</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cd /opt/odoo\ngit clone https://www.github.com/odoo/odoo --depth 1 --branch 8.0 --single-branch .\nexit # Exit odoo user</code></pre></div>\n<h1 id=\"step-5-configuring-the-openerp-application\" style=\"position:relative;\"><a href=\"#step-5-configuring-the-openerp-application\" aria-label=\"step 5 configuring the openerp application permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 5. Configuring the OpenERP application</h1>\n<p>The default configuration file for the server (<code class=\"language-text\">/opt/odoo/debian/openerp-server.conf</code>) is actually very minimal and will, with only a small change work fine so we’ll copy that file to where we need it and change it’s ownership and permissions:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo cp /opt/odoo/debian/openerp-server.conf /etc/odoo-server.conf\nsudo chown odoo: /etc/odoo-server.conf\nsudo chmod 640 /etc/odoo-server.conf</code></pre></div>\n<p>The above commands make the file owned and writeable only by the odoo user and group and only readable by odoo and root.</p>\n<p>To allow the odoo server to run initially, you should only need to change two lines in this file. Open file via <strong>nano</strong> or <strong>vim</strong> or your favourite text editor here</p>\n<p>I’m using nano: <code class=\"language-text\">bash sudo nano /etc/odoo-server.conf</code></p>\n<p>And change:</p>\n<ul>\n<li><code class=\"language-text\">db_password = False</code> to the same password you used back in step 2.</li>\n<li>Then modify the line <code class=\"language-text\">addons_path = /usr/lib/python2.7/dist-packages/openerp/addons</code> so that it reads <code class=\"language-text\">addons_path = /opt/odoo/addons</code> instead</li>\n<li><code class=\"language-text\">logfile = /var/log/odoo/odoo-server.log</code> the path of log file</li>\n</ul>\n<p>Once the configuration file is edited and saved, you can start the server just to check if it actually runs.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo su - odoo -s /bin/bash\n/opt/odoo/openerp-server</code></pre></div>\n<p>If you end up with a few lines eventually saying OpenERP (Yes. The log still says OpenERP and not Odoo) is running and waiting for connections then you are all set.</p>\n<p>If there are errors, you’ll need to go back and find out where the problem is.</p>\n<p>Otherwise simply enter CTL+C to stop the server and then exit to leave the openerp user account and go back to your own shell.</p>\n<h1 id=\"step-6-installing-the-boot-script\" style=\"position:relative;\"><a href=\"#step-6-installing-the-boot-script\" aria-label=\"step 6 installing the boot script permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 6. Installing the boot script</h1>\n<p>For the final step we need to install a script which will be used to start-up and shut down the server automatically and also run the application as the correct user. There is a script you can use in <code class=\"language-text\">/opt/odoo/debian/init</code> but this will need a few small modifications to work with the system installed the way I have described above. Here’s a link to the one I’ve already modified for Odoo version 8.</p>\n<p>TD;DR:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo cp /opt/odoo/debian/init /etc/init.d/odoo-server</code></pre></div>\n<p>Similar to the configuration file, you need to either copy it or paste the contents of this script to a file in <code class=\"language-text\">/etc/init.d/</code> and call it <code class=\"language-text\">odoo-server</code>. Once it is in the right place you will need to make it executable and owned by root:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo chmod 755 /etc/init.d/odoo-server\nsudo chown root: /etc/init.d/odoo-server</code></pre></div>\n<p>In the configuration file there’s an entry for the server’s log file. We need to create that directory first so that the server has somewhere to log to and also we must make it writeable by the openerp user:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo mkdir /var/log/odoo\nsudo chown odoo:root /var/log/odoo</code></pre></div>\n<h1 id=\"step-7-testing-the-server\" style=\"position:relative;\"><a href=\"#step-7-testing-the-server\" aria-label=\"step 7 testing the server permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 7. Testing the server</h1>\n<p>To start the Odoo server type:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo /etc/init.d/odoo-server start</code></pre></div>\n<p>You should now be able to view the logfile and see that the server has started.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">less /var/log/odoo/odoo-server.log</code></pre></div>\n<p>If the log file looks OK, now point your web browser at the domain or <code class=\"language-text\">IP address of your Odoo server</code> (or <code class=\"language-text\">localhost</code> if you are on the same machine) and use port <code class=\"language-text\">8069</code>. The url will look something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">http://localhost:8069</code></pre></div>\n<p>What you should see is a screen like this one (it is the Database Management Screen because you have no Odoo databases yet):</p>\n<p>Default plain password: <code class=\"language-text\">/etc/odoo-server.conf</code></p>\n<p>After test, Now it’s time to make sure the server stops properly too:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo /etc/init.d/odoo-server stop</code></pre></div>\n<p>Check the log file again to make sure it has stopped and/or look at your server’s process list.</p>\n<h1 id=\"step-8-automating-odoo-startup-and-shutdown\" style=\"position:relative;\"><a href=\"#step-8-automating-odoo-startup-and-shutdown\" aria-label=\"step 8 automating odoo startup and shutdown permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 8. Automating Odoo startup and shutdown</h1>\n<p>If everything above seems to be working OK, the final step is make the script start and stop automatically with the Ubuntu Server. To do this type:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo update-rc.d odoo-server defaults</code></pre></div>\n<p>You can now try rebooting you server if you like. Odoo should be running by the time you log back in.</p>\n<p>If you type <code class=\"language-text\">ps aux | grep odoo</code> you should see a line similar to this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">odoo 1491 0.1 10.6 207132 53596 ? Sl 22:23 0:02 python /opt/odoo/openerp-server -c /etc/odoo-server.conf</code></pre></div>\n<p>Which shows that the server is running. And of course you can check the logfile or visit the server from your web browser too.</p>\n<p>That’s it!</p>\n<p><a href=\"http://page.duyetdev.com/Odoo-installation-Ubuntu-14.04-15.04/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://page.duyetdev.com/Odoo-installation-Ubuntu-14.04-15.04/</a></p>","fields":{"slug":"/2015/09/install-odoo-8-in-ubuntu-14-04-15-04.html","tagSlugs":["/tag/linux/","/tag/tutorial/","/tag/ubuntu/","/tag/install/","/tag/python/","/tag/odoo/"]},"frontmatter":{"date":"2015-09-22T20:32:00.000+07:00","description":"Cài đặt Odoo trên Ubuntu 14.04/15.04","tags":["Linux","Tutorial","Ubuntu","Install","Python","Odoo"],"title":"Install Odoo 8 in Ubuntu 14.04/15.04","fbCommentUrl":"none"}}},"pageContext":{"slug":"/2015/09/install-odoo-8-in-ubuntu-14-04-15-04.html"}},"staticQueryHashes":["251939775","2672868365","401334301"]}