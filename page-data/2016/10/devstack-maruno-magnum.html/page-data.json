{"componentChunkName":"component---src-templates-post-template-js","path":"/2016/10/devstack-maruno-magnum.html","result":{"data":{"markdownRemark":{"id":"7c17edbd-adcd-5200-ae20-a23be6c8b6aa","html":"<p>DevStack là giúp triển khai mô hình Openstack cho Developers, có thể chạy trên Single-Machine.<br>\nTrong bài này sẽ hướng dẫn cách cài đặt DevStack, với các module mở rộng như <strong>Magnum [1]</strong> (triển khai Containers trên Openstack), <strong>Murano</strong> [2] (Application catalogs), …  </p>\n<p><a href=\"https://blog.duyet.net/2016/10/devstack-maruno-magnum.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><img src=\"https://2.bp.blogspot.com/-8mDGZPymnKU/WBSIXCWaybI/AAAAAAAAfaM/pIubRdw6SrkJLB4Sm8oLQJ1D7quLU8rxwCEw/s1600/Screenshot%2Bfrom%2B2016-10-29%2B18-28-55.png\"></a></p>\n<h2 id=\"môi-trường\" style=\"position:relative;\"><a href=\"#m%C3%B4i-tr%C6%B0%E1%BB%9Dng\" aria-label=\"môi trường permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Môi trường </h2>\n<p>DevStack yêu cầu chạy trên HDH <strong>Linux</strong>. Các hệ điều hành Linux mà bạn có thể sử dụng như: <strong>Ubuntu 14.04/16.04, Fedora 23/24, CentOS/RHEL 7, cũng như Debian và OpenSUSE.</strong><br>\nTrong bài này tất cả ví dụ được sử dụng trên <strong>CentOS 7</strong>, các hệ điều hành khác tương tự  </p>\n<p>Cài đặt git  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo yum install git</code></pre></div>\n<p>Cài Git trên Ubuntu  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo apt-get install git</code></pre></div>\n<p>Cài đặt user <strong>stack</strong> (không cài đặt <strong>devstack</strong> dưới tài khoản root)  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo su -adduser stackecho &quot;stack ALL=(ALL) NOPASSWD: ALL&quot; &gt;&gt; /etc/sudoersexitsu stack</code></pre></div>\n<h2 id=\"cài-đặt-devstack-với-module-murano-và-magnum\" style=\"position:relative;\"><a href=\"#c%C3%A0i-%C4%91%E1%BA%B7t-devstack-v%E1%BB%9Bi-module-murano-v%C3%A0-magnum\" aria-label=\"cài đặt devstack với module murano và magnum permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cài đặt Devstack với module Murano và Magnum</h2>\n<p>Murano project là dự án application catalog của <strong>Openstack</strong>, cho phép lập trình viên có thể public các ứng dụng dưới dạng cloud-ready, người dùng có thể triển khai, cài đặt các ứng dụng này chỉ <strong>với vài nút bấm</strong>.  </p>\n<p>Ví dụ về Murano:  </p>\n<p><a href=\"https://2.bp.blogspot.com/-PC036z2KBHQ/WBR70SPyJaI/AAAAAAAAfZg/AZsICBqFE0k1KjX2pgaYj0dG30IlyCZUwCK4B/s1600/murano1.png\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><img src=\"https://2.bp.blogspot.com/-PC036z2KBHQ/WBR70SPyJaI/AAAAAAAAfZg/AZsICBqFE0k1KjX2pgaYj0dG30IlyCZUwCK4B/s1600/murano1.png\"></a></p>\n<p>Tải và cấu hình Devstack  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cd ~git clone https://git.openstack.org/openstack-dev/devstackcd devstackgit checkout stable/mitaka</code></pre></div>\n<p>Tạo file <code class=\"language-text\">local.conf</code> để cấu hình cài đặt Devstack, nội dung file <code class=\"language-text\">local.conf</code> được giải thích lần lượt như sau, file hoàn chỉnh ở bên dưới:  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[[local|localrc]]# CredentialsADMIN_PASSWORD=123456DATABASE_PASSWORD=$ADMIN_PASSWORDRABBIT_PASSWORD=$ADMIN_PASSWORDSERVICE_PASSWORD=$ADMIN_PASSWORDSERVICE_TOKEN=$ADMIN_PASSWORDSWIFT_PASSWORD=$ADMIN_PASSWORDenable_service rabbit# Ensure we are using neutron networking rather than nova networkingdisable_service n-netenable_service q-svcenable_service q-agtenable_service q-dhcpenable_service q-l3enable_service q-metaenable_service neutron</code></pre></div>\n<p>Bắt đầu file cấu hình, ta đặt Password cho Admin và các services khác mặc định là 123456. Bật và tắt một số services mặc định của Devstack. Tiếp tục file:  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># Disable LBaaS(v1) servicedisable_service q-lbaas# Enable LBaaS(v2) servicesenable_service q-lbaasv2enable_service octaviaenable_service o-cwenable_service o-hkenable_service o-hmenable_service o-api</code></pre></div>\n<p>Tắt LBaaS v1 và bật v2. Tiếp theo:  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># Enable heat pluginenable_plugin heat https://git.openstack.org/openstack/heat# Enable barbican servicesenable_plugin barbican https://git.openstack.org/openstack/barbicanenable_plugin neutron-lbaas https://git.openstack.org/openstack/neutron-lbaasenable_plugin octavia https://git.openstack.org/openstack/octavia</code></pre></div>\n<p>Magnum yêu cầu bật plugin Heat, Barbican là REST API services giúp quản lý an toàn mật khẩu, mã hóa và X.509 Certificates.  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">enable_plugin murano git://git.openstack.org/openstack/muranoenable_service murano-cfapienable_plugin ceilometer git://git.openstack.org/openstack/ceilometer# Enable magnum plugin after dependent pluginsenable_plugin magnum https://git.openstack.org/openstack/magnum# Optional:  uncomment to enable the Magnum UI plugin in Horizonenable_plugin magnum-ui https://github.com/openstack/magnum-ui# enable swift in devstack for Docker 2.0enable_service s-proxyenable_service s-objectenable_service s-containerenable_service s-account</code></pre></div>\n<p>Bật các modules Magnum, UI và Murano. Cuối cùng ta được file local.conf hoàn chỉnh như sau [3]:</p>\n<script src=\"https://gist.github.com/duyetdev/1fe56d669bf5587f1cdc3bd8b7aabc07.js\"></script>\n<p>Chạy lệnh sau và đợi Devstack tự động Clone các phần thiếu và tự động cấu hình cài đặt. Đi pha 1 hoặc vài ly cà phê rồi đợi, cài đặt thường diễn ra trong vòng 30 phút - vài tiếng tùy cấu hình server.  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">./stack.sh</code></pre></div>\n<h2 id=\"hoàn-tất-và-sử-dụng\" style=\"position:relative;\"><a href=\"#ho%C3%A0n-t%E1%BA%A5t-v%C3%A0-s%E1%BB%AD-d%E1%BB%A5ng\" aria-label=\"hoàn tất và sử dụng permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hoàn tất và sử dụng</h2>\n<p>Truy cập <a href=\"http://localhost/dashboard\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://localhost/dashboard</a>, sử dụng tài khoản admin/123456  </p>\n<p><a href=\"https://2.bp.blogspot.com/-Qlcm007QthA/WBSIWhGNn2I/AAAAAAAAfZ8/3zqB_AvN-Osu2kED5XIA_tHZwceYglWEQCLcB/s1600/Screenshot%2Bfrom%2B2016-10-29%2B18-25-58.png\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><img src=\"https://2.bp.blogspot.com/-Qlcm007QthA/WBSIWhGNn2I/AAAAAAAAfZ8/3zqB_AvN-Osu2kED5XIA_tHZwceYglWEQCLcB/s1600/Screenshot%2Bfrom%2B2016-10-29%2B18-25-58.png\"></a></p>\n<p><a href=\"https://1.bp.blogspot.com/-H5Y6oNV7cJA/WBSIWvFtlaI/AAAAAAAAfZ0/Pt4ZYk3icFs1tCAo0vaRPSJE4G_GKzzjQCLcB/s1600/Screenshot%2Bfrom%2B2016-10-29%2B18-26-32.png\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><img src=\"https://1.bp.blogspot.com/-H5Y6oNV7cJA/WBSIWvFtlaI/AAAAAAAAfZ0/Pt4ZYk3icFs1tCAo0vaRPSJE4G_GKzzjQCLcB/s1600/Screenshot%2Bfrom%2B2016-10-29%2B18-26-32.png\"></a></p>\n<p><a href=\"https://3.bp.blogspot.com/-WBKgs6w-hfk/WBSIWxa6U2I/AAAAAAAAfaA/6kw2R29TumUg9L2kSAj-NFBuyJTmz72YwCLcB/s1600/Screenshot%2Bfrom%2B2016-10-29%2B18-28-29.png\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><img src=\"https://3.bp.blogspot.com/-WBKgs6w-hfk/WBSIWxa6U2I/AAAAAAAAfaA/6kw2R29TumUg9L2kSAj-NFBuyJTmz72YwCLcB/s1600/Screenshot%2Bfrom%2B2016-10-29%2B18-28-29.png\"></a></p>\n<p><a href=\"https://1.bp.blogspot.com/-8mDGZPymnKU/WBSIXCWaybI/AAAAAAAAfaI/3qIRB7fMTVUc0k7qYdQ9D14Qe64aWsTSACLcB/s1600/Screenshot%2Bfrom%2B2016-10-29%2B18-28-55.png\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><img src=\"https://1.bp.blogspot.com/-8mDGZPymnKU/WBSIXCWaybI/AAAAAAAAfaI/3qIRB7fMTVUc0k7qYdQ9D14Qe64aWsTSACLcB/s1600/Screenshot%2Bfrom%2B2016-10-29%2B18-28-55.png\"></a></p>\n<p><a href=\"https://4.bp.blogspot.com/-sJkQ7GdcHko/WBSIXGi4KzI/AAAAAAAAfaE/JG3-vBF4AAM9AGsbEMbkVBIVnjXtUAcoACLcB/s1600/Screenshot%2Bfrom%2B2016-10-29%2B18-29-36.png\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><img src=\"https://4.bp.blogspot.com/-sJkQ7GdcHko/WBSIXGi4KzI/AAAAAAAAfaE/JG3-vBF4AAM9AGsbEMbkVBIVnjXtUAcoACLcB/s1600/Screenshot%2Bfrom%2B2016-10-29%2B18-29-36.png\"></a></p>\n<h2 id=\"một-số-lỗi-hay-gặp\" style=\"position:relative;\"><a href=\"#m%E1%BB%99t-s%E1%BB%91-l%E1%BB%97i-hay-g%E1%BA%B7p\" aria-label=\"một số lỗi hay gặp permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Một số lỗi hay gặp</h2>\n<p>Danh sách các lỗi hay gặp và cách xử lý</p>\n<p><strong>Error ./stack.sh line 488: generate-subunit command not found</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">wget https://bootstrap.pypa.io/get-pip.pysudo python get-pip.pysudo pip install -U os-testr</code></pre></div>\n<p><strong>ImportError: No module named osc_lib</strong>  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo pip install osc-lib</code></pre></div>\n<p><strong>ImportError: No module from neutron_lib.db import model.base</strong>  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo pip install neutron-libb</code></pre></div>\n<p><strong>sudo permission install python-openstackclient</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo pip install python-openstackclient</code></pre></div>\n<h2 id=\"tham-khảo\" style=\"position:relative;\"><a href=\"#tham-kh%E1%BA%A3o\" aria-label=\"tham khảo permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tham khảo</h2>\n<p>[1] <a href=\"https://wiki.openstack.org/wiki/Magnum\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://wiki.openstack.org/wiki/Magnum</a><br>\n[2] <a href=\"https://wiki.openstack.org/wiki/Murano\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://wiki.openstack.org/wiki/Murano</a><br>\n[3] <a href=\"https://gist.github.com/duyetdev/1fe56d669bf5587f1cdc3bd8b7aabc07\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://gist.github.com/duyetdev/1fe56d669bf5587f1cdc3bd8b7aabc07</a></p>","fields":{"slug":"/2016/10/devstack-maruno-magnum.html","tagSlugs":["/tag/docker/","/tag/python/","/tag/javascript/","/tag/magnum/","/tag/openstack/","/tag/dev-stack/","/tag/maruno/","/tag/horizon/"]},"frontmatter":{"date":"2016-10-29T18:46:00.000+07:00","description":"DevStack là giúp triển khai mô hình Openstack cho Developers, có thể chạy trên Single-Machine","tags":["docker","Python","javascript","Magnum","Openstack","DevStack","Maruno","Horizon"],"title":"Openstack - App Catalog và Docker trên Devstack","fbCommentUrl":"http://blog.duyetdev.com/2016/10/devstack-maruno-magnum.html"}}},"pageContext":{"slug":"/2016/10/devstack-maruno-magnum.html"}}}