{"componentChunkName":"component---src-templates-post-template-js","path":"/2016/09/chay-apache-spark-voi-jupyter-notebook.html","result":{"data":{"markdownRemark":{"id":"6d6d45d1-ee0f-59b6-9088-1d54981343ad","html":"<p>IPython Notebook là một công cụ tiện lợi cho Python. Ta có thể Debug chương trình PySpark Line-by-line trên IPython Notebook một cách dễ dàng, tiết kiệm được nhiều thời gian.</p>\n<p><img src=\"https://1.bp.blogspot.com/-IbzOyRw7mkM/V-Dm-cyXE9I/AAAAAAAAd-I/nGA92fFap4MM4uqKErB7g2H-t6T7CD1RQCLcB/s1600/Selection_006.png\"></p>\n<h2 id=\"1-cài-đặt-spark\" style=\"position:relative;\"><a href=\"#1-c%C3%A0i-%C4%91%E1%BA%B7t-spark\" aria-label=\"1 cài đặt spark permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Cài đặt Spark</h2>\n<p>Truy cập trang chủ (<a href=\"https://spark.apache.org/downloads.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://spark.apache.org/downloads.html</a>), tải về bản Spark phù hợp (ở đây tôi tải bản Apache Spark 1.6.2).</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">wget</span> http://d3kbcqa49mib13.cloudfront.net/spark-1.6.2-bin-hadoop2.6.tgz</code></pre></div>\n<p>Giải nén và khởi động Spark Standard Alone (hoặc Cluster).</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">tar</span> -xzvf spark-1.6.2-bin-hadoop2.6.tgz\n<span class=\"token builtin class-name\">cd</span> spark-1.6.2-bin-hadoop2.6\n./sbin/start-all.sh</code></pre></div>\n<p><a href=\"https://1.bp.blogspot.com/-1NWXJdwzLWE/V-DfR4WnwsI/AAAAAAAAd9o/bdVrgZD73Kg-WQ8m2vPGipFaZuK7zxvYgCLcB/s1600/duyetdev%2540duyetdev%253A%2B%257E-spark-1.6.2-bin-hadoop2.6_001.png\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><img src=\"https://1.bp.blogspot.com/-1NWXJdwzLWE/V-DfR4WnwsI/AAAAAAAAd9o/bdVrgZD73Kg-WQ8m2vPGipFaZuK7zxvYgCLcB/s1600/duyetdev%2540duyetdev%253A%2B%257E-spark-1.6.2-bin-hadoop2.6_001.png\"></a>\nKiểm tra Spark đã Start thành công hay chưa, truy cập: <a href=\"http://spark-master-ip:8080\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://spark-master-ip:8080</a></p>\n<p><a href=\"https://1.bp.blogspot.com/-8msgj2t9RLA/V-Dfx7XjMXI/AAAAAAAAd9s/umMiRMw-fgYYFw3Zx7cPwpOnVI2eGDdHACLcB/s1600/Spark%2BMaster%2Bat%2Bspark%253A--duyetdev%253A7077%2B-%2BGoogle%2BChrome_002.png\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><img src=\"https://1.bp.blogspot.com/-8msgj2t9RLA/V-Dfx7XjMXI/AAAAAAAAd9s/umMiRMw-fgYYFw3Zx7cPwpOnVI2eGDdHACLcB/s1600/Spark%2BMaster%2Bat%2Bspark%253A--duyetdev%253A7077%2B-%2BGoogle%2BChrome_002.png\"></a></p>\n<h2 id=\"2-cài-đặt-jupyter-notebook\" style=\"position:relative;\"><a href=\"#2-c%C3%A0i-%C4%91%E1%BA%B7t-jupyter-notebook\" aria-label=\"2 cài đặt jupyter notebook permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Cài đặt Jupyter Notebook</h2>\n<p>Cài đặt bằng command line</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> ipython-notebook</code></pre></div>\n<p>Cấu hình cho IPython Notebook</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">jupyter notebook --generate-config</code></pre></div>\n<p>Mở file <code class=\"language-text\">.jupyter/jupyter_notebook_config.py</code> và cấu hình lại các tham số sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">c.NotebookApp.ip <span class=\"token operator\">=</span> <span class=\"token string\">'*'</span>\nc.NotebookApp.port <span class=\"token operator\">=</span> <span class=\"token number\">1603</span>\nc.NotebookApp.open_browser <span class=\"token operator\">=</span> False</code></pre></div>\n<p>Port có thể thay đổi theo ý thích, nếu trùng thì Notebook sẽ tự động đổi sang Port khác.</p>\n<p><a href=\"https://3.bp.blogspot.com/-b0G6CE9ED4U/V-DhO5Y6MfI/AAAAAAAAd90/ien68QnA5jsMwwZ7owHKgMs4GpB9t-I3wCLcB/s1600/duyetdev%2540duyetdev%253A%2B%257E-spark-1.6.2-bin-hadoop2.6_003.png\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><img src=\"https://3.bp.blogspot.com/-b0G6CE9ED4U/V-DhO5Y6MfI/AAAAAAAAd90/ien68QnA5jsMwwZ7owHKgMs4GpB9t-I3wCLcB/s1600/duyetdev%2540duyetdev%253A%2B%257E-spark-1.6.2-bin-hadoop2.6_003.png\"></a></p>\n<h2 id=\"3-run\" style=\"position:relative;\"><a href=\"#3-run\" aria-label=\"3 run permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. RUN</h2>\n<p>Thực thi lệnh</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">PYSPARK_DRIVER_PYTHON</span><span class=\"token operator\">=</span>ipython <span class=\"token assign-left variable\">PYSPARK_DRIVER_PYTHON_OPTS</span><span class=\"token operator\">=</span><span class=\"token string\">'notebook'</span> pyspark <span class=\"token punctuation\">\\</span>\n --master <span class=\"token builtin class-name\">local</span> --conf spark.executor.memory<span class=\"token operator\">=</span>3g <span class=\"token punctuation\">\\</span>\n --conf spark.executor.cores<span class=\"token operator\">=</span><span class=\"token number\">2</span> --conf spark.driver.memory<span class=\"token operator\">=</span>3g <span class=\"token punctuation\">\\</span>\n --conf spark.executor.instances<span class=\"token operator\">=</span><span class=\"token number\">9</span> <span class=\"token punctuation\">\\</span>\n --conf spark.kryoserializer.buffer.max<span class=\"token operator\">=</span>256m</code></pre></div>\n<p><a href=\"https://2.bp.blogspot.com/-s4p2Ew5LjI8/V-Dh92C3axI/AAAAAAAAd98/oUmUpv4w9UUwPdnjdNLFIlcCNDOT-VBPgCLcB/s1600/duyetdev%2540duyetdev%253A%2B%257E-spark-1.6.2-bin-hadoop2.6_004.png\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><img src=\"https://2.bp.blogspot.com/-s4p2Ew5LjI8/V-Dh92C3axI/AAAAAAAAd98/oUmUpv4w9UUwPdnjdNLFIlcCNDOT-VBPgCLcB/s1600/duyetdev%2540duyetdev%253A%2B%257E-spark-1.6.2-bin-hadoop2.6_004.png\"></a></p>\n<p>Tùy chỉnh các tham số tùy theo thực tế. Truy cập vào IPython Notebook và sử dụng: <code class=\"language-text\">http://notebook-ip:1234</code></p>\n<p><a href=\"https://2.bp.blogspot.com/--_gZr8Eizx8/V-DmB-nFxWI/AAAAAAAAd-E/9wdevAO6Bl8yIX4YA7RNYPnw5DftnKYSACLcB/s1600/%2528Busy%2529%2Bspark-hello%2B-%2BGoogle%2BChrome_005.png\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><img src=\"https://2.bp.blogspot.com/--_gZr8Eizx8/V-DmB-nFxWI/AAAAAAAAd-E/9wdevAO6Bl8yIX4YA7RNYPnw5DftnKYSACLcB/s1600/%2528Busy%2529%2Bspark-hello%2B-%2BGoogle%2BChrome_005.png\"></a></p>","fields":{"slug":"/2016/09/chay-apache-spark-voi-jupyter-notebook.html","tagSlugs":["/tag/data-engineer/","/tag/jupyter/","/tag/apache-spark/","/tag/i-python/","/tag/python/","/tag/javascript/","/tag/py-spark/","/tag/spark/","/tag/machine-learning/"]},"frontmatter":{"date":"2016-09-20T14:36:00.001+07:00","description":"IPython Notebook là một công cụ tiện lợi cho Python. Ta có thể Debug chương trình PySpark Line-by-line trên IPython Notebook một cách dễ dàng, tiết kiệm được nhiều thời gian.","tags":["Data Engineer","Jupyter","Apache Spark","IPython","Python","javascript","PySpark","Spark","Machine Learning"],"title":"Chạy Apache Spark với Jupyter Notebook","fbCommentUrl":"http://blog.duyetdev.com/2016/09/chay-apache-spark-voi-jupiter-notebook.html"}}},"pageContext":{"slug":"/2016/09/chay-apache-spark-voi-jupyter-notebook.html"}}}